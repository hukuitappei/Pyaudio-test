# 🎤 音声録音・文字起こしアプリ

Streamlit + OpenAI Whisper API + Googleカレンダー連携を使用したブラウザベース音声録音・文字起こしアプリケーション

## 🌟 新機能

### 📋 タスク管理機能
- **AI自動タスク抽出**: 文字起こし結果からタスクを自動判定・抽出
- **タスク管理**: 追加、編集、削除、ステータス管理
- **フィルター機能**: ステータス、優先度、カテゴリ別フィルター
- **統計情報**: タスクの進捗状況を可視化

### 📅 カレンダー管理機能
- **AI自動イベント抽出**: 文字起こし結果からイベントを自動判定・抽出
- **イベント管理**: 追加、編集、削除、カテゴリ管理
- **日付別表示**: 特定日付のイベント表示
- **カレンダー表示**: 月別カレンダー表示

### 🌐 Googleカレンダー連携機能
- **Google認証**: OAuth 2.0による安全な認証
- **カレンダー同期**: ローカル ↔ Googleカレンダー双方向同期
- **イベント管理**: Googleカレンダーイベントの直接管理
- **複数カレンダー対応**: 複数のGoogleカレンダーに対応

### ⌨️ ショートカットキー機能
- **Ctrl+T**: タスク追加
- **Ctrl+E**: イベント追加
- **F11**: 文字起こし開始
- **Ctrl+S**: 文字起こし結果保存
- **Ctrl+Shift+T**: タスク管理タブを開く
- **Ctrl+Shift+E**: カレンダータブを開く
- **Ctrl+Shift+G**: Googleカレンダータブを開く

### 🤖 AI自動判定機能
- **TaskAnalyzer**: 文字起こし結果からタスクを自動抽出
- **EventAnalyzer**: 文字起こし結果からイベントを自動抽出
- **キーワード判定**: タスク・イベント関連のキーワードを自動判定
- **GPT-3.5-turbo統合**: 高度な自然言語処理による判定

## 🚀 主な機能

### 🎤 音声録音・文字起こし
- **ブラウザベース録音**: マイクを使用したリアルタイム録音
- **OpenAI Whisper API**: 高精度な音声認識
- **リアルタイム文字起こし**: 録音と同時に文字起こし実行
- **ファイル保存**: 音声ファイルと文字起こし結果の保存

### ⚙️ 拡張設定機能
- **デバイス設定**: マイク、スピーカー、カメラの設定
- **録音設定**: サンプルレート、チャンネル数、品質設定
- **文字起こし設定**: 言語、モデル、プロンプト設定
- **UI設定**: テーマ、レイアウト、表示設定

### 📚 ユーザー辞書機能
- **カスタム辞書**: 専門用語や固有名詞の登録
- **自動補完**: 文字起こし時の自動辞書適用
- **辞書管理**: 追加、編集、削除、インポート/エクスポート

### ⚡ コマンド管理機能
- **カスタムコマンド**: よく使用する処理の登録
- **ショートカット**: キーボードショートカットの設定
- **コマンド実行**: ワンクリックでの処理実行

### 📁 ファイル管理機能
- **録音ファイル管理**: 録音ファイルの一覧、再生、削除
- **文字起こしファイル管理**: 文字起こし結果の一覧、編集、削除
- **ファイル検索**: ファイル名、内容での検索機能

## 🛠️ セットアップ

### 1. 仮想環境の作成
```bash
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS/Linux
```

### 2. 依存関係のインストール
```bash
pip install -r requirements.txt
```

### 3. 環境変数の設定
`.env`ファイルを作成：
```bash
# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key_here

# Google API Key (optional)
GOOGLE_API_KEY=your_google_api_key_here

# Google Calendar Settings
GOOGLE_CALENDAR_ID=primary
GOOGLE_TIMEZONE=Asia/Tokyo
```

### 4. Googleカレンダー連携の設定（オプション）
1. [Google Cloud Console](https://console.cloud.google.com/)でプロジェクトを作成
2. Google Calendar APIを有効化
3. OAuth 2.0クライアントIDを作成
4. `credentials.json`をダウンロードしてプロジェクトに配置

### 5. アプリケーションの起動
```bash
streamlit run app_audiorec.py
```

## 📖 使用方法

### 1. 音声録音・文字起こし
1. "🎤 録音・文字起こし"タブを開く
2. "🎙️ 録音開始"ボタンをクリック
3. マイクに向かって話す
4. "⏹️ 録音停止"ボタンをクリック
5. "🎙️ 文字起こし開始"ボタンをクリック

### 2. タスク・イベント管理
1. 文字起こし結果から自動検出されたタスク・イベントを確認
2. "➕ タスク追加"または"➕ イベント追加"ボタンをクリック
3. "📋 タスク管理"または"📅 カレンダー"タブで詳細管理

### 3. Googleカレンダー連携
1. "🌐 Googleカレンダー"タブを開く
2. "🔐 認証設定"でGoogle認証を実行
3. "🔄 同期"でローカルとGoogleカレンダーを同期

### 4. ショートカットキー
- **Ctrl+T**: タスク追加
- **Ctrl+E**: イベント追加
- **F11**: 文字起こし開始
- **Ctrl+S**: 文字起こし結果保存

## 📁 ファイル構成

```
streamlit-pyaudio-voice-record/
├── app_audiorec.py              # メインアプリケーション
├── utils_audiorec.py            # ユーティリティ関数
├── settings_ui_audiorec.py      # 設定UIコンポーネント
├── requirements.txt              # 依存関係
├── .env                         # 環境変数（.gitignore）
├── credentials.json             # Google認証情報（.gitignore）
├── token.pickle                 # Google認証トークン（.gitignore）
├── settings/
│   ├── app_settings.json        # アプリケーション設定
│   ├── commands.json           # コマンド設定
│   ├── user_dictionary.json    # ユーザー辞書
│   ├── tasks.json              # タスクデータ
│   └── calendar.json           # カレンダーデータ
├── recordings/                  # 録音ファイル
├── transcriptions/              # 文字起こしファイル
└── .streamlit/
    ├── config.toml             # Streamlit設定
    └── secrets.toml            # シークレット情報（.gitignore）
```

## 🚀 デプロイ

### Streamlit Cloud
1. GitHubリポジトリをStreamlit Cloudに接続
2. SecretsでAPIキーを設定
3. 自動デプロイ

### ローカル環境
```bash
streamlit run app_audiorec.py
```

## 🔧 トラブルシューティング

### よくある問題

#### 1. マイク権限エラー
- **症状**: マイクにアクセスできない
- **解決**: ブラウザのマイク権限を許可

#### 2. OpenAI APIエラー
- **症状**: 文字起こしが失敗する
- **解決**: APIキーが正しく設定されているか確認

#### 3. 音質の問題
- **症状**: 文字起こし精度が低い
- **解決**: マイク設定と録音環境を確認

#### 4. ショートカットキーが動作しない
- **症状**: キーボードショートカットが無効
- **解決**: ブラウザの設定を確認

#### 5. Googleカレンダー認証エラー
- **症状**: Google認証が失敗する
- **解決**: credentials.jsonファイルが正しく配置されているか確認

## 📝 更新履歴

### v2.0.0 (2024-08-02)
- ✅ Googleカレンダー連携機能を追加
- ✅ タスク管理機能を追加
- ✅ カレンダー管理機能を追加
- ✅ AI自動判定機能を追加
- ✅ ショートカットキー機能を追加

### v1.0.0 (2024-07-28)
- ✅ 基本的な音声録音・文字起こし機能
- ✅ OpenAI Whisper API統合
- ✅ 設定管理機能
- ✅ ファイル管理機能

## 📄 ライセンス

MIT License

## 🤝 コントリビューション

プルリクエストやイシューの報告を歓迎します。

## 📞 サポート

問題が発生した場合は、GitHubのイシューを作成してください。
