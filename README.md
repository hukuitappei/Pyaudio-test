# 🎤 音声録音＆文字起こしアプリ

Streamlitを使用した音声録音と文字起こし（音声認識）アプリケーションです。

## 📋 機能

- 🎤 **音声録音**: ブラウザから直接音声を録音
- 📝 **文字起こし**: OpenAI Whisperを使用した高精度な音声認識
- 📁 **ファイルアップロード**: 既存の音声ファイルの文字起こし
- 💾 **ファイル保存**: 録音ファイルの自動保存
- 🌐 **Web対応**: Streamlit Cloudでの公開対応

## 🚀 セットアップ

### 1. リポジトリのクローン

```bash
git clone https://github.com/yukiyamada-who-loves-yoga/streamlit-pyaudio-voice-record.git
cd streamlit-pyaudio-voice-record
```

### 2. 仮想環境の作成

```bash
python -m venv venv
source venv/bin/activate  # macOS/Linux
# または
venv\Scripts\activate  # Windows
```

### 3. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 4. アプリケーションの起動

```bash
streamlit run app.py
```

## 📖 使い方

### 1. 録音機能

#### 録音時間の設定
- スライダーで1秒〜60秒の間で録音時間を設定
- デフォルトは5秒

#### 録音の実行
1. 「🎤 録音開始」ボタンをクリック
2. ブラウザでマイクアクセスの許可を確認
3. 指定した時間だけ録音が実行される
4. 録音完了後、自動で文字起こしが開始される

#### 録音時の注意点
- **マイクアクセス**: ブラウザでマイクの使用を許可してください
- **HTTPS環境**: セキュアな環境でのみ録音が可能です
- **Streamlit Cloud**: クラウド環境では録音機能に制限がある場合があります

### 2. ファイルアップロード機能

#### 対応ファイル形式
- WAV (.wav)
- MP3 (.mp3)
- M4A (.m4a)

#### アップロード手順
1. 「📁 既存ファイルの文字起こし」セクションでファイルを選択
2. 音声ファイルをドラッグ&ドロップまたはクリックして選択
3. 自動で文字起こしが実行される

### 3. 文字起こし結果

#### 結果の表示
- 文字起こし結果はテキストエリアに表示
- 日本語の音声認識に対応
- エラーが発生した場合は適切なエラーメッセージを表示

#### 結果の利用
- テキストをコピー&ペーストで他のアプリケーションに利用可能
- 長い音声ファイルも処理可能

### 4. ファイル管理

#### 保存されたファイル
- 録音したファイルは`recordings/`ディレクトリに自動保存
- ファイル名にはタイムスタンプが含まれる
- ファイルサイズも表示される

#### ファイル一覧
- 「📂 保存されたファイル」セクションで保存済みファイルを確認
- 最新のファイルが上に表示される

## 🔧 技術仕様

### 使用技術
- **Streamlit**: Webアプリケーションフレームワーク
- **OpenAI Whisper**: 音声認識エンジン
- **PyAudio**: 音声録音ライブラリ
- **NumPy**: 数値計算ライブラリ

### システム要件
- Python 3.8以上
- マイク機能付きデバイス（録音機能使用時）
- インターネット接続（Whisperモデルダウンロード時）

## 🌐 Streamlit Cloudでの利用

### デプロイ方法
1. GitHubリポジトリをStreamlit Cloudに接続
2. 自動デプロイが実行される
3. 公開URLが生成される

### 制限事項
- **録音機能**: クラウド環境では制限がある場合があります
- **ファイル保存**: 一時的な保存のみ可能
- **マイクアクセス**: ブラウザの許可が必要

### 推奨使用方法
- **ファイルアップロード機能**をメインに使用
- 録音機能はローカル環境でテスト
- 大きな音声ファイルは分割してアップロード

## 🛠️ トラブルシューティング

### よくある問題

#### 録音ができない
- ブラウザでマイクアクセスを許可してください
- HTTPS環境でアクセスしているか確認
- マイクが正常に動作しているか確認

#### 文字起こしが失敗する
- 音声ファイルの形式を確認
- ファイルサイズが大きすぎないか確認
- インターネット接続を確認

#### アプリが起動しない
- Pythonのバージョンを確認（3.8以上）
- 依存関係が正しくインストールされているか確認
- 仮想環境が有効になっているか確認

### エラーメッセージ

#### "マイクへのアクセスが許可されているか確認してください"
- ブラウザの設定でマイクを許可
- サイトの権限設定を確認

#### "音声認識エラー"
- 音声ファイルの形式を確認
- ファイルが破損していないか確認

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能要望は、GitHubのIssuesでお知らせください。

## 📞 サポート

問題が発生した場合は、以下の手順でサポートを受けられます：

1. GitHubのIssuesで問題を報告
2. エラーメッセージと再現手順を記載
3. 使用環境（OS、ブラウザ、Pythonバージョン）を明記

---

**Happy Recording! 🎤✨**
