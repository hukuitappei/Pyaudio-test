# 音声録音・文字起こしアプリ（拡張版）

Streamlit Cloud対応のブラウザベース音声録音・文字起こしアプリケーションです。streamlit-audiorec + OpenAI Whisper API + 拡張設定機能 + タスク・カレンダー管理を使用しています。

## 🚀 新機能

### 📋 タスク管理機能
- **自動タスク検出**: 文字起こし結果からタスクを自動判定・抽出
- **タスク管理**: タスクの追加、編集、削除、ステータス管理
- **フィルター機能**: ステータス、優先度、カテゴリ別フィルター
- **統計情報**: タスクの進捗状況を可視化

### 📅 カレンダー管理機能
- **自動イベント検出**: 文字起こし結果からイベントを自動判定・抽出
- **カレンダー管理**: イベントの追加、編集、削除
- **日付別表示**: 特定日付のイベント表示
- **カテゴリ管理**: イベントのカテゴリ分類

### ⌨️ ショートカットキー機能
- **Ctrl+T**: タスク追加
- **Ctrl+E**: イベント追加
- **F11**: 文字起こし開始
- **Ctrl+S**: 文字起こし結果保存
- **Ctrl+Shift+T**: タスク管理タブを開く
- **Ctrl+Shift+E**: カレンダータブを開く

## 🎯 主な機能

### 🎤 音声録音・文字起こし
- **高精度音声認識**: OpenAI Whisper APIを使用
- **日本語対応**: 日本語の音声認識に最適化
- **自動言語検出**: 言語を自動判定
- **句読点自動挿入**: 自然な文章形式で出力

### 🤖 AI機能
- **タスク自動判定**: 文字起こし結果からタスクを自動抽出
- **イベント自動判定**: 文字起こし結果からイベントを自動抽出
- **LLM要約**: GPT-3.5-turboを使用した高度な要約機能
- **キーポイント抽出**: 重要なポイントを自動抽出

### ⚙️ 拡張設定機能
- **音声設定**: サンプルレート、チャンネル数、ゲイン調整
- **Whisper設定**: モデルサイズ、言語、温度設定
- **デバイス管理**: マイクデバイスの選択・テスト
- **UI設定**: 自動保存、品質分析、レベル監視

### 📚 ユーザー辞書機能
- **カスタム辞書**: 専門用語や固有名詞の登録
- **発音記号**: 発音記号の登録
- **カテゴリ管理**: 辞書のカテゴリ分類

### ⚡ コマンド管理機能
- **カスタムコマンド**: 文字起こし結果の処理コマンド
- **LLM統合**: GPT-3.5-turboを使用した高度な処理
- **出力形式**: 箇条書き、要約、ファイル出力など

### 📁 ファイル管理機能
- **録音ファイル管理**: 録音ファイルの保存・削除
- **文字起こしファイル管理**: 文字起こし結果の保存・削除
- **一括操作**: ファイルの一括削除・整理

## 🛠️ セットアップ

### 1. 環境構築
```bash
# リポジトリをクローン
git clone <repository-url>
cd streamlit-pyaudio-voice-record

# 仮想環境を作成
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 依存関係をインストール
pip install -r requirements.txt
```

### 2. 環境変数の設定
`.env`ファイルを作成し、以下の内容を追加：
```
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. アプリケーションの起動
```bash
streamlit run app_audiorec.py
```

## 📖 使用方法

### 1. 音声録音・文字起こし
1. **録音開始**: マイクボタンをクリックして録音開始
2. **録音停止**: 停止ボタンをクリックして録音終了
3. **文字起こし**: 「文字起こし開始」ボタンをクリック
4. **結果確認**: 文字起こし結果を確認・編集
5. **自動検出**: タスク・イベントの自動検出結果を確認
6. **追加**: 検出されたタスク・イベントを一クリックで追加

### 2. タスク管理
1. **タスク一覧**: すべてのタスクを表示・管理
2. **フィルター**: ステータス、優先度、カテゴリでフィルター
3. **ステータス変更**: タスクの進捗状況を更新
4. **タスク追加**: 手動でタスクを追加
5. **統計情報**: タスクの進捗状況を確認

### 3. カレンダー管理
1. **カレンダー表示**: 日付別にイベントを表示
2. **イベント追加**: 手動でイベントを追加
3. **イベント一覧**: すべてのイベントを表示・管理
4. **カテゴリ管理**: イベントのカテゴリ分類

### 4. ショートカットキー
- **Ctrl+T**: タスク追加ダイアログを開く
- **Ctrl+E**: イベント追加ダイアログを開く
- **F11**: 文字起こしを開始
- **Ctrl+S**: 文字起こし結果を保存

## 🔧 設定

### 音声設定
- **サンプルレート**: 44100Hz（推奨）
- **チャンネル数**: 1（モノラル）
- **ゲイン**: 2.0（音量調整）
- **録音時間**: 5秒（デフォルト）

### Whisper設定
- **モデルサイズ**: base（推奨）
- **言語**: ja（日本語）
- **温度**: 0.0（一貫性重視）
- **初期プロンプト**: 日本語音声用の最適化

### UI設定
- **自動保存**: 録音ファイルの自動保存
- **品質分析**: 音声品質の分析表示
- **レベル監視**: リアルタイム音量レベル表示

## 📁 ファイル構造

```
streamlit-pyaudio-voice-record/
├── app_audiorec.py              # メインアプリケーション
├── utils_audiorec.py            # ユーティリティクラス
├── settings_ui_audiorec.py      # UIコンポーネント
├── requirements.txt              # 依存関係
├── README.md                    # このファイル
├── .env                         # 環境変数（要作成）
├── settings/                    # 設定ファイル
│   ├── app_settings.json        # アプリ設定
│   ├── commands.json           # コマンド設定
│   ├── user_dictionary.json    # ユーザー辞書
│   ├── tasks.json              # タスクデータ
│   └── calendar.json           # カレンダーデータ
├── recordings/                  # 録音ファイル
└── transcriptions/              # 文字起こしファイル
```

## 🚀 デプロイ

### Streamlit Cloud
1. GitHubにリポジトリをプッシュ
2. Streamlit Cloudでリポジトリを接続
3. 環境変数（OPENAI_API_KEY）を設定
4. デプロイ完了

### ローカル環境
```bash
# 開発サーバー起動
streamlit run app_audiorec.py --server.port 8501
```

## 🔍 トラブルシューティング

### よくある問題

#### 1. マイク権限エラー
**症状**: ブラウザでマイク権限が拒否される
**解決策**: 
- ブラウザの設定でマイク権限を許可
- HTTPS環境で実行（ローカルではlocalhostでも可）

#### 2. OpenAI APIエラー
**症状**: 文字起こしが失敗する
**解決策**:
- APIキーが正しく設定されているか確認
- インターネット接続を確認
- API使用量制限を確認

#### 3. 音声品質の問題
**症状**: 文字起こし精度が低い
**解決策**:
- マイクの品質を確認
- 静かな環境で録音
- 音声設定を調整

#### 4. ショートカットキーが動作しない
**症状**: キーボードショートカットが無効
**解決策**:
- ブラウザの設定を確認
- 他のアプリケーションとの競合を確認
- キーボードレイアウトを確認

## 📝 更新履歴

### v2.0.0 (2025-01-XX)
- ✅ タスク管理機能を追加
- ✅ カレンダー管理機能を追加
- ✅ ショートカットキー機能を追加
- ✅ AI自動判定機能を追加
- ✅ UI/UXの改善

### v1.0.0 (2025-01-XX)
- ✅ 基本的な音声録音機能
- ✅ OpenAI Whisper API統合
- ✅ 拡張設定機能
- ✅ ユーザー辞書機能
- ✅ コマンド管理機能

## 🤝 貢献

プロジェクトへの貢献を歓迎します！

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- [streamlit-audiorec](https://github.com/Joooohan/streamlit-audiorec) - 音声録音コンポーネント
- [OpenAI Whisper](https://openai.com/research/whisper) - 音声認識API
- [Streamlit](https://streamlit.io/) - Webアプリケーションフレームワーク

---

**Streamlit Cloud対応** - streamlit-audiorec + OpenAI Whisper API + 拡張設定機能 + タスク・カレンダー管理を使用したブラウザベース録音・文字起こし
