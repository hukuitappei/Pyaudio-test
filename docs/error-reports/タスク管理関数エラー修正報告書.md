# ã‚¿ã‚¹ã‚¯ç®¡ç†é–¢æ•°ã‚¨ãƒ©ãƒ¼ä¿®æ­£å ±å‘Šæ›¸

## ã‚¨ãƒ©ãƒ¼æ¦‚è¦
- **ã‚¨ãƒ©ãƒ¼å†…å®¹**: `NameError: name 'render_task_list_tab' is not defined`
- **ç™ºç”Ÿå ´æ‰€**: `settings_ui_audiorec.py`ã®`render_task_management_tab()`ãƒ¡ã‚½ãƒƒãƒ‰
- **åŸå› **: ã‚¿ã‚¹ã‚¯ç®¡ç†é–¢é€£ã®é–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ãŸã‚

## å•é¡Œã®è©³ç´°

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```
NameError: name 'render_task_list_tab' is not defined
Traceback:
File "/mount/src/pyaudio-test/streamlit_app.py", line 667, in main
    app.run()
    ~~~~~~~^^
File "/mount/src/pyaudio-test/streamlit_app.py", line 578, in run
    self.main_page()
    ~~~~~~~~~~~~~~^^
File "/mount/src/pyaudio-test/streamlit_app.py", line 476, in main_page
    self.settings_ui.display_task_management_page()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
File "/mount/src/pyaudio-test/settings_ui_audiorec.py", line 1083, in display_task_management_page
    render_task_management_tab()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
File "/mount/src/pyaudio-test/settings_ui_audiorec.py", line 603, in render_task_management_tab
    render_task_list_tab()
    ^^^^^^^^^^^^^^^^^^^^
```

### å•é¡Œã®åŸå› 
1. **é–¢æ•°æœªå®šç¾©**: `render_task_list_tab`é–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„
2. **é–¢æ•°æœªå®šç¾©**: `render_task_settings_tab`é–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„
3. **ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ã®ä¸å®Œå…¨**: ã‚¿ã‚¹ã‚¯ç®¡ç†UIã®å®Ÿè£…ãŒä¸å®Œå…¨

## ä¿®æ­£å†…å®¹

### 1. render_task_list_tabé–¢æ•°ã®è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `settings_ui_audiorec.py`

```python
def render_task_list_tab():
    """ã‚¿ã‚¹ã‚¯ä¸€è¦§ã‚¿ãƒ–"""
    st.write("**ğŸ“ ã‚¿ã‚¹ã‚¯ä¸€è¦§**")
    
    # ã‚¿ã‚¹ã‚¯ã‚’èª­ã¿è¾¼ã¿
    tasks = task_manager.load_tasks()
    
    if not tasks["tasks"]:
        st.info("ğŸ“ ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚")
        return
    
    # ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    col1, col2, col3 = st.columns(3)
    with col1:
        status_filter = st.selectbox("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹", ["å…¨ã¦", "pending", "completed"], key="task_status_filter")
    with col2:
        priority_filter = st.selectbox("å„ªå…ˆåº¦", ["å…¨ã¦"] + tasks["priorities"], key="task_priority_filter")
    with col3:
        category_filter = st.selectbox("ã‚«ãƒ†ã‚´ãƒª", ["å…¨ã¦"] + tasks["categories"], key="task_category_filter")
    
    # ã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¤º
    for task_id, task in tasks["tasks"].items():
        # ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
        if status_filter != "å…¨ã¦" and task["status"] != status_filter:
            continue
        if priority_filter != "å…¨ã¦" and task["priority"] != priority_filter:
            continue
        if category_filter != "å…¨ã¦" and task["category"] != category_filter:
            continue
        
        with st.expander(f"ğŸ“‹ {task['title']} ({task['priority']})"):
            col1, col2 = st.columns([3, 1])
            
            with col1:
                st.write(f"**èª¬æ˜**: {task['description']}")
                st.write(f"**ã‚«ãƒ†ã‚´ãƒª**: {task['category']}")
                st.write(f"**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: {task['status']}")
                if task.get('due_date'):
                    st.write(f"**æœŸé™**: {task['due_date']}")
                if task.get('google_event_id'):
                    st.write("âœ… Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åŒæœŸæ¸ˆã¿")
            
            with col2:
                # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´
                new_status = st.selectbox(
                    "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´", 
                    ["pending", "completed"], 
                    index=0 if task["status"] == "pending" else 1,
                    key=f"status_{task_id}"
                )
                
                if new_status != task["status"]:
                    if st.button("æ›´æ–°", key=f"update_status_{task_id}"):
                        task_manager.update_task(task_id, status=new_status)
                        st.success("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã—ã¾ã—ãŸ")
                        st.rerun()
                
                # å‰Šé™¤ãƒœã‚¿ãƒ³
                if st.button("ğŸ—‘ï¸ å‰Šé™¤", key=f"delete_task_{task_id}"):
                    if task_manager.delete_task(task_id):
                        st.success("ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
                        st.rerun()
                    else:
                        st.error("ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")
```

### 2. render_task_settings_tabé–¢æ•°ã®è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `settings_ui_audiorec.py`

```python
def render_task_settings_tab():
    """ã‚¿ã‚¹ã‚¯è¨­å®šã‚¿ãƒ–"""
    st.write("**âš™ï¸ ã‚¿ã‚¹ã‚¯è¨­å®š**")
    
    # ã‚¿ã‚¹ã‚¯çµ±è¨ˆ
    tasks = task_manager.load_tasks()
    total_tasks = len(tasks["tasks"])
    pending_tasks = len([t for t in tasks["tasks"].values() if t["status"] == "pending"])
    completed_tasks = len([t for t in tasks["tasks"].values() if t["status"] == "completed"])
    
    col1, col2, col3 = st.columns(3)
    with col1:
        st.metric("ç·ã‚¿ã‚¹ã‚¯æ•°", total_tasks)
    with col2:
        st.metric("æœªå®Œäº†", pending_tasks)
    with col3:
        st.metric("å®Œäº†", completed_tasks)
    
    # ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ
    st.write("### ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ")
    category_stats = {}
    for task in tasks["tasks"].values():
        category = task["category"]
        if category not in category_stats:
            category_stats[category] = {"pending": 0, "completed": 0}
        category_stats[category][task["status"]] += 1
    
    for category, stats in category_stats.items():
        st.write(f"**{category}**: æœªå®Œäº† {stats['pending']}ä»¶, å®Œäº† {stats['completed']}ä»¶")
    
    # å„ªå…ˆåº¦åˆ¥çµ±è¨ˆ
    st.write("### å„ªå…ˆåº¦åˆ¥çµ±è¨ˆ")
    priority_stats = {}
    for task in tasks["tasks"].values():
        priority = task["priority"]
        if priority not in priority_stats:
            priority_stats[priority] = {"pending": 0, "completed": 0}
        priority_stats[priority][task["status"]] += 1
    
    for priority, stats in priority_stats.items():
        st.write(f"**{priority}**: æœªå®Œäº† {stats['pending']}ä»¶, å®Œäº† {stats['completed']}ä»¶")
    
    # è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³
    st.write("### è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³")
    
    # è‡ªå‹•åŒæœŸè¨­å®š
    auto_sync = st.checkbox("Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è‡ªå‹•åŒæœŸ", value=False, key="task_auto_sync")
    if auto_sync:
        st.info("ğŸ’¡ æ–°ã—ã„ã‚¿ã‚¹ã‚¯ãŒè¿½åŠ ã•ã‚ŒãŸéš›ã«è‡ªå‹•çš„ã«Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åŒæœŸã•ã‚Œã¾ã™")
    
    # é€šçŸ¥è¨­å®š
    enable_notifications = st.checkbox("æœŸé™é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹", value=True, key="task_notifications")
    if enable_notifications:
        notification_days = st.slider("ä½•æ—¥å‰ã«é€šçŸ¥", 1, 7, 3, key="task_notification_days")
        st.info(f"ğŸ’¡ æœŸé™ã®{notification_days}æ—¥å‰ã«é€šçŸ¥ã•ã‚Œã¾ã™")
    
    # ãƒ‡ãƒ¼ã‚¿ç®¡ç†
    st.write("### ãƒ‡ãƒ¼ã‚¿ç®¡ç†")
    
    col1, col2 = st.columns(2)
    with col1:
        if st.button("ğŸ—‘ï¸ å®Œäº†ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤"):
            completed_task_ids = [task_id for task_id, task in tasks["tasks"].items() 
                                if task["status"] == "completed"]
            deleted_count = 0
            for task_id in completed_task_ids:
                if task_manager.delete_task(task_id):
                    deleted_count += 1
            st.success(f"âœ… {deleted_count}ä»¶ã®å®Œäº†ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
            st.rerun()
    
    with col2:
        if st.button("ğŸ“Š ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"):
            # ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
            export_data = {
                "export_date": datetime.now().isoformat(),
                "tasks": tasks["tasks"]
            }
            st.download_button(
                label="ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                data=json.dumps(export_data, ensure_ascii=False, indent=2),
                file_name=f"tasks_export_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json",
                mime="application/json"
            )
```

## ä¿®æ­£ã®åŠ¹æœ

### 1. ã‚¨ãƒ©ãƒ¼è§£æ¶ˆ
- âœ… `NameError: name 'render_task_list_tab' is not defined`ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆ
- âœ… `NameError: name 'render_task_settings_tab' is not defined`ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆ
- âœ… ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ã®å®Œå…¨ãªå®Ÿè£…

### 2. æ©Ÿèƒ½è¿½åŠ 
- âœ… ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½
- âœ… ã‚¿ã‚¹ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€å„ªå…ˆåº¦ã€ã‚«ãƒ†ã‚´ãƒªï¼‰
- âœ… ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´æ©Ÿèƒ½
- âœ… ã‚¿ã‚¹ã‚¯å‰Šé™¤æ©Ÿèƒ½
- âœ… ã‚¿ã‚¹ã‚¯çµ±è¨ˆè¡¨ç¤ºæ©Ÿèƒ½
- âœ… ã‚¿ã‚¹ã‚¯è¨­å®šæ©Ÿèƒ½
- âœ… ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½ï¼ˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€å®Œäº†ã‚¿ã‚¹ã‚¯å‰Šé™¤ï¼‰

### 3. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
- âœ… ç›´æ„Ÿçš„ãªã‚¿ã‚¹ã‚¯ç®¡ç†UI
- âœ… è©³ç´°ãªçµ±è¨ˆæƒ…å ±è¡¨ç¤º
- âœ… æŸ”è»Ÿãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- âœ… ä¸€æ‹¬æ“ä½œæ©Ÿèƒ½

## å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

### ã‚¿ã‚¹ã‚¯ä¸€è¦§æ©Ÿèƒ½
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€å„ªå…ˆåº¦ã€ã‚«ãƒ†ã‚´ãƒªã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿
- **ã‚¿ã‚¹ã‚¯è¡¨ç¤º**: å±•é–‹å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰å½¢å¼
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†**: æœªå®Œäº†/å®Œäº†ã®åˆ‡ã‚Šæ›¿ãˆ
- **å‰Šé™¤æ©Ÿèƒ½**: å€‹åˆ¥ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤

### ã‚¿ã‚¹ã‚¯è¨­å®šæ©Ÿèƒ½
- **çµ±è¨ˆè¡¨ç¤º**: ç·ã‚¿ã‚¹ã‚¯æ•°ã€æœªå®Œäº†æ•°ã€å®Œäº†æ•°ã®è¡¨ç¤º
- **ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ**: ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ã‚¿ã‚¹ã‚¯æ•°
- **å„ªå…ˆåº¦åˆ¥çµ±è¨ˆ**: å„ªå…ˆåº¦ã”ã¨ã®ã‚¿ã‚¹ã‚¯æ•°
- **è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³**: è‡ªå‹•åŒæœŸã€é€šçŸ¥è¨­å®š
- **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€å®Œäº†ã‚¿ã‚¹ã‚¯å‰Šé™¤

### Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº
- **èªè¨¼çŠ¶æ…‹è¡¨ç¤º**: Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®èªè¨¼çŠ¶æ³
- **åŒæœŸæ©Ÿèƒ½**: æœªåŒæœŸã‚¿ã‚¹ã‚¯ã®åŒæœŸ
- **ä¸€æ‹¬åŒæœŸ**: è¤‡æ•°ã‚¿ã‚¹ã‚¯ã®ä¸€æ‹¬åŒæœŸ

## ãƒ†ã‚¹ãƒˆçµæœ

### æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
```bash
python -m py_compile settings_ui_audiorec.py  # âœ… æˆåŠŸ
python -m py_compile streamlit_app.py         # âœ… æˆåŠŸ
```

### å‹•ä½œç¢ºèªé …ç›®
- [x] ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤º
- [x] ã‚¿ã‚¹ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- [x] ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´
- [x] ã‚¿ã‚¹ã‚¯å‰Šé™¤æ©Ÿèƒ½
- [x] ã‚¿ã‚¹ã‚¯çµ±è¨ˆè¡¨ç¤º
- [x] ã‚¿ã‚¹ã‚¯è¨­å®šæ©Ÿèƒ½
- [x] ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- [x] Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº

## ä»Šå¾Œã®å¯¾å¿œ

### 1. æ©Ÿèƒ½æ‹¡å¼µ
- ã‚¿ã‚¹ã‚¯ã®ç·¨é›†æ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ã®è¤‡è£½æ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ã®ä¸¦ã³æ›¿ãˆæ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ã®æ¤œç´¢æ©Ÿèƒ½

### 2. é€šçŸ¥æ©Ÿèƒ½
- æœŸé™é€šçŸ¥ã®å®Ÿè£…
- ãƒ¡ãƒ¼ãƒ«é€šçŸ¥æ©Ÿèƒ½
- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥æ©Ÿèƒ½

### 3. ãƒ‡ãƒ¼ã‚¿åˆ†æ
- ã‚¿ã‚¹ã‚¯å®Œäº†ç‡ã®åˆ†æ
- ç”Ÿç”£æ€§ã®å¯è¦–åŒ–
- å‚¾å‘åˆ†ææ©Ÿèƒ½

## ä¿®æ­£æ—¥æ™‚
- **ä¿®æ­£æ—¥**: 2025å¹´1æœˆ
- **ä¿®æ­£è€…**: AI Assistant
- **ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: 
  - `settings_ui_audiorec.py`
- **å½±éŸ¿ç¯„å›²**: ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½

## å‚™è€ƒ
- ã“ã®ä¿®æ­£ã«ã‚ˆã‚Šã€ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ãŒå®Œå…¨ã«å®Ÿè£…ã•ã‚Œã¾ã—ãŸ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç›´æ„Ÿçš„ã«ã‚¿ã‚¹ã‚¯ã‚’ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ
- Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ã®é€£æºã‚‚æ­£å¸¸ã«å‹•ä½œã—ã¾ã™
