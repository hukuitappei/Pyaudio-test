# 音声録音・文字起こしアプリ セットアップガイド

## 1. 基本セットアップ

### 1.1 仮想環境の作成
```bash
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS/Linux
```

### 1.2 依存関係のインストール
```bash
pip install -r requirements.txt
```

### 1.3 環境変数の設定
`.env`ファイルを作成し、以下の内容を記述：

```bash
# OpenAI API Key
OPENAI_API_KEY=your_actual_openai_api_key_here

# Google API Key (optional)
GOOGLE_API_KEY=your_google_api_key_here

# Google Calendar Settings
GOOGLE_CALENDAR_ID=primary
GOOGLE_TIMEZONE=Asia/Tokyo
```

## 2. Googleカレンダー連携の設定

### 2.1 Google Cloud Consoleでの設定

1. **Google Cloud Consoleにアクセス**
   - https://console.cloud.google.com/

2. **新しいプロジェクトを作成**
   - プロジェクト名: `voice-recorder-app`（任意）

3. **Google Calendar APIを有効化**
   - APIとサービス → ライブラリ
   - "Google Calendar API"を検索して有効化

4. **認証情報を作成**
   - APIとサービス → 認証情報
   - "認証情報を作成" → "OAuth 2.0クライアントID"
   - アプリケーションの種類: "デスクトップアプリ"
   - 名前: "Voice Recorder App"

5. **credentials.jsonをダウンロード**
   - 作成されたOAuth 2.0クライアントIDをクリック
   - "JSONをダウンロード"をクリック
   - ダウンロードしたファイルを`credentials.json`にリネーム

6. **credentials.jsonをプロジェクトに配置**
   - プロジェクトのルートディレクトリに`credentials.json`を配置

### 2.2 初回認証の実行

1. **アプリケーションを起動**
   ```bash
   streamlit run app_audiorec.py
   ```

2. **Googleカレンダータブにアクセス**
   - "🌐 Googleカレンダー"タブをクリック

3. **認証を実行**
   - "🔐 認証設定"タブで"🔐 Google認証を実行"をクリック
   - ブラウザが開き、Googleアカウントでログイン
   - アプリケーションへのアクセスを許可

4. **認証完了**
   - 認証が完了すると`token.pickle`ファイルが作成される

## 3. アプリケーションの起動

```bash
streamlit run app_audiorec.py
```

## 4. 機能の確認

### 4.1 基本機能
- ✅ 音声録音・文字起こし
- ✅ タスク管理
- ✅ カレンダー管理
- ✅ AI自動判定

### 4.2 Googleカレンダー連携機能
- ✅ Googleカレンダー認証
- ✅ カレンダー一覧表示
- ✅ ローカル → Google同期
- ✅ Google → ローカル同期
- ✅ Googleカレンダーイベント管理

## 5. トラブルシューティング

### 5.1 Google認証エラー
- **エラー**: "credentials.jsonファイルが見つかりません"
- **解決**: Google Cloud Consoleから認証情報をダウンロード

### 5.2 API制限エラー
- **エラー**: "API quota exceeded"
- **解決**: Google Cloud ConsoleでAPI制限を確認・調整

### 5.3 権限エラー
- **エラー**: "Insufficient permissions"
- **解決**: Googleアカウントでカレンダーへのアクセス権限を確認

## 6. セキュリティ注意事項

- `credentials.json`と`token.pickle`は`.gitignore`に含まれています
- これらのファイルをGitリポジトリにコミットしないでください
- 本番環境では適切な認証情報管理を行ってください 