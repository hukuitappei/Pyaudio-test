# プロジェクト構造ガイド

## 📁 整理後のディレクトリ構造

```
streamlit-pyaudio-voice-record/
├── streamlit_app.py              # Streamlit Cloud用メインエントリーポイント
├── setup_google_auth.py          # Google認証設定スクリプト
├── requirements.txt              # Python依存関係
├── env_example.txt              # 環境変数設定例
├── README.md                    # プロジェクト概要
│
├── src/                         # ソースコードディレクトリ
│   ├── app_audiorec.py          # メインアプリケーション
│   ├── utils_audiorec.py        # ユーティリティクラス
│   ├── settings_ui_audiorec.py  # UI設定コンポーネント
│   └── config_manager.py        # 設定管理（Streamlit Cloud対応）
│
├── docs/                        # ドキュメントディレクトリ
│   ├── プロジェクト構造.md      # このファイル
│   ├── セットアップガイド.md    # セットアップ手順
│   ├── セキュリティ設定ガイド.md # セキュリティ設定
│   ├── streamlit_cloud_setup.md # Streamlit Cloud設定
│   ├── 修正報告書.md           # 修正履歴
│   └── ファイル整理報告.md     # ファイル整理履歴
│
├── settings/                    # 設定ファイルディレクトリ
│   ├── app_settings.json        # アプリケーション設定
│   ├── commands.json           # コマンド設定
│   ├── user_dictionary.json    # ユーザー辞書
│   ├── tasks.json              # タスクデータ
│   └── calendar.json           # カレンダーデータ
│
├── recordings/                  # 録音ファイル（.gitignoreで除外）
├── transcriptions/              # 文字起こし結果（.gitignoreで除外）
│
└── .streamlit/                  # Streamlit設定
    └── config.toml              # Streamlit設定ファイル
```

## 🎯 主要ファイルの役割

### メインアプリケーション
- **`streamlit_app.py`**: Streamlit Cloud用エントリーポイント
- **`src/app_audiorec.py`**: メインアプリケーション（音声録音・文字起こし）

### コアモジュール
- **`src/utils_audiorec.py`**: 
  - 設定管理クラス
  - Google Calendar連携
  - タスク・イベント管理
  - 音声・文字起こし処理

- **`src/settings_ui_audiorec.py`**: 
  - Streamlit UI コンポーネント
  - 設定画面の描画

- **`src/config_manager.py`**: 
  - 環境変数とStreamlit Secrets対応
  - 設定値の統一管理

### 設定・認証
- **`setup_google_auth.py`**: Google認証設定支援スクリプト
- **`env_example.txt`**: 環境変数設定テンプレート

## 🚀 デプロイメント

### ローカル開発
```bash
streamlit run src/app_audiorec.py
```

### Streamlit Cloud
- メインファイル: `streamlit_app.py`
- 自動的に `src/app_audiorec.py` をインポート・実行

## 🔧 設定ファイル

### 環境変数（.env または Streamlit Secrets）
```
GOOGLE_CLIENT_ID=your_client_id
GOOGLE_CLIENT_SECRET=your_client_secret  
GOOGLE_REFRESH_TOKEN=your_refresh_token
OPENAI_API_KEY=your_openai_api_key
```

### アプリケーション設定（settings/app_settings.json）
- 音声設定
- UI設定
- Whisper設定
- ショートカットキー設定

## 📝 データファイル

### 永続化データ
- **`settings/tasks.json`**: タスクデータ
- **`settings/calendar.json`**: ローカルカレンダーデータ
- **`settings/user_dictionary.json`**: ユーザー辞書
- **`settings/commands.json`**: カスタムコマンド

### 一時データ（.gitignoreで除外）
- **`recordings/`**: 音声録音ファイル
- **`transcriptions/`**: 文字起こし結果

## 🔒 セキュリティ

### .gitignoreで除外されるファイル
- `.env` - 環境変数
- `.streamlit/secrets.toml` - Streamlit Secrets
- `credentials.json` - Google OAuth認証情報
- `token.pickle` - Google認証トークン
- `recordings/` - 音声ファイル

## 🧹 整理のポイント

### 削除された重複ファイル
- ルートディレクトリにあった重複ファイル群
- 空のディレクトリ（auth/, config/, data/, scripts/）
- 古いバージョンのファイル（src/app.py）

### 移動されたファイル
- すべてのドキュメントファイル → `docs/`
- ソースコード → `src/`（統一）

### 改善された点
- 明確なディレクトリ分離
- Streamlit Cloud対応の統一
- ドキュメントの整理
- 重複ファイルの除去

## 📚 関連ドキュメント

- [セットアップガイド](./セットアップガイド.md)
- [Streamlit Cloud設定](./streamlit_cloud_setup.md)
- [セキュリティ設定](./セキュリティ設定ガイド.md)
- [修正報告書](./修正報告書.md)
